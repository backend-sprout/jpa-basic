# 연관 관계 매핑 기초  
엔티티들은 대부분 다른 엔티티와 연관관계가 있다.    
그런데 **객체는 참조**를 사용해서 관계를 맺고 **테이블은 외래키**를 사용해서 관계를 맺는다.     
`ORM`에서 가장 어려운 부분이 **`객체 연관관계`와 `테이블 연관관계`를 매핑하는 것이다.**         

* **방향(Direction) :**   
    * 단반향/양방향이 있다.
    * **단방향 :** 둘 중 하나만 참조 
    * **양방향 :** 양쪽 모두 서로를 참조  
    * 방향은 객체 관계에서만 존재하고 **테이블 관계는 항상 양방향**이다.  
* **다중성(Multiplicity) :**  
    * `N:1`, `1:N`, `1:1`, `N:M` 다중성이 있다.   
* **연관관계의 주인 :**  
    * 객체를 양방향 관계로 만들면 연관관계의 주인을 정해야 한다.   

# 단방향 연관관계 (1:N)   
  
**가정**
* 회원과 팀이 있다.  
* 회원은 하나의 팀에만 소속될 수 있다.  
* 회원과 팀은 `다대일(1:N)` 관계이다.  
  
[PPT]()

**객체 연관관계**  
* `Member 객체`는 `Member.team`필드로 `Team 객체`와 연관관계를 맺는다.  
* **단방향 관계이다.**   
    * 회원은 -> 팀을 알 수 있다. 
    * 팀 -> 회원을 알 수 없다.  
  
**테이블 연관관계**   
* `Member 테이블`은 `TEAM_ID` 외래 키로 `Team 테이블`과 연관관계를 맺는다.  
* `Member 테이블`과 `Team 테이블`은 **양방향 관계이다.**  
    * `Member 테이블`은 `TEAM_ID`를 통해 `Team`을 조회할 수 있다. (회원과 팀)  
    * `Team 테이블`은 `PK`인, `TEAM_ID`를 통해 `Member`를 조회할 수 있다.(팀과 회원)  
    * 즉, `MEMBER JOIN TEAM(회원과 팀)`은 물론, `TEAM JOIN MEMBER(팀과 회원)`도 가능하다.     
      
**객체 연관관계와 테이블 연관관계의 가장 큰 차이**   
**참조를 통한 연관관계는 언제나 단방향이다.**  
객체간의 연관관계를 **양방향으로 만들고 싶으면**     
**반대쪽에도 필드를 추가해서 참조를 보관해야한다.**   
즉, 연관관계를 하나 더 만들어야 하고 이를 양방향 연관관계라 말한다.  
하지만, 보다 더 정확히 말하면,   
**양뱡향 관계가 아니라 서로 다른 단방향 관계 2개이다.**     
    
## 순수한 객체 연관관계   

[PPT]()

**회원과 팀 클래스**
```java
```
**동작 코드**
```java
```

객체는 참조를 사용해서 연관관계를 탐색할 수 있는데    
이것을 **객체 그래프 탐색**이라고 한다.   
참고로 이러한 객체 그래프 탐색을 진행할 때, 지연로딩이 효과적으로 사용된다.    
    
**테이블 연관관계** 
테이블 연관관계는 `FK`와 `JOIN`을 이용하여 연관관계를 탐색한다.      

## 객체 관계 매핑 

[PPT]() 

```java

```

# 참고 
https://www.inflearn.com/questions/113969
