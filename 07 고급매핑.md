# 상속 관계 매핑    
`RDB`에는 객체지향과 다르게 **`상속`이라는 개념이 없다.**      
대신에 이와 비슷한 `슈퍼 타입` 과 `서브 타입`관계라는 모델링 기법을 이용한다.      
`ORM`에서의 `상속 관계 매핑`은 DB의 `슈퍼/서브타입` 관계를 맵핑하는 것이다.    
      
`슈퍼 타입 서브 타입` 논리 모델을     
실제 물리 모델인 테이블로 구현할 때는 `3가지` 방법이 있다.     

* **각각의 테이블로 변환 :**   
  각각을 모두 테이블로 만들고 조회할 때 `JOIN`을 사용한다.   
  `JPA` 에서는 이를 **조인 전략**이라고 말한다.  
* **통합 테이블로 변환 :**    
  테이블을 하나만 사용해서 `통합`한다.     
  `JPA` 에서는 **단일 테이블 전략**이라고 한다.      
* **서브 타입 테이블로 변환 :**     
  `서브 타입`마다 하나의 테이블을 만든다.      
  `JPA` 에서는 **구현 클래스마다의 테이블 전략**이라고 한다.     
        
## 조인 전략    
엔티티 각각을 모두 테이블로 만들고       
자식 테이블이 부모 테이블의 기본 키를 받아서      
**`기본 키` + `외래 키`로 사용하는 전략이다.**        
따라서 조회할 때, `JOIN`을 많이 사용한다.     
    
단, 해당 전략을 사용할 때 주의할 점이 있는데   
객체는 `타입`으로 구분할 수 있지만,   
테이블은 `타입의 개념이 없다.`     
따라서 **타입을 구분하는 컬럼을 추가해야 한다.**    

**Item**
```java
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item {

    @Id
    @GeneratedValue // Identity면 에러
    private Long id;

    private String name;

    private int price;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }
}
```

**Movie**
```java
@Entity
@DiscriminatorValue("M")
public class Movie extends Item {

    private String director;
    private String actor;

    public String getDirector() {
        return director;
    }

    public void setDirector(String director) {
        this.director = director;
    }

    public String getActor() {
        return actor;
    }

    public void setActor(String actor) {
        this.actor = actor;
    }
}
```

**Album**
```java
@Entity
@DiscriminatorValue("A")
public class Album extends Item {

    private String artist;

    public String getArtist() {
        return artist;
    }

    public void setArtist(String artist) {
        this.artist = artist;
    }
}
```

**Book**
```java
@Entity
@DiscriminatorValue("B")
public class Book extends Item {

    private String author;
    private String isbn;

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public String getIsbn() {
        return isbn;
    }

    public void setIsbn(String isbn) {
        this.isbn = isbn;
    }
}
```

